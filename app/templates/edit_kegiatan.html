<!DOCTYPE html>
<html
  lang="{{ current_lang }}"
  x-data
  class="transition duration-300 ease-in-out"
>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="csrf-token" content="{{ csrf_token() }}" />
    <title>
      {{ 'Edit Kegiatan | SPK Pramuka' if current_lang == 'id' else 'Edit Activity | Scout DSS' }}
    </title>

    <!-- Tailwind CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/output.css') }}"
    />

    <!-- Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
    />

    <!-- Alpine.js -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>

    <!-- Script Theme -->
    {% include 'script_theme.html' %}
  </head>
  <body
    x-data="{ ready: false }"
    x-init="ready = true"
    :class="{ 'dark': $store.theme?.isDark }"
    x-bind:class="{
        'bg-background-dark text-white': $store.theme?.isDark,
        'bg-gray-100 text-black': !$store.theme?.isDark
      }"
    class="transition duration-300 ease-in-out font-sans scroll-smooth {{ 'bg-background-dark text-white' if current_theme == 'dark' else 'bg-gray-100 text-black' }}"
  >
    <div
      class="flex h-screen {{ 'bg-gray-950 dark:bg-gray-900' if current_theme == 'dark' else 'bg-gray-300 dark:bg-gray-300' }}"
    >
      <!-- Main content -->
      <div class="flex flex-col flex-1 overflow-hidden h-full">
        <!-- Page Content -->
        <main class="flex-1 overflow-y-auto pt-8 px-4 md:px-8 h-full">
          <section class="flex justify-center items-start">
            <div
              class="w-full max-w-lg rounded-2xl shadow-lg p-8 transition-all duration-300 {{ 'bg-gray-700' if current_theme == 'dark' else 'bg-gray-100' }}"
            >
              <h2
                class="text-2xl font-semibold mb-14 text-center {{ 'text-gray-800 dark:text-gray-100' if current_theme == 'dark' else 'text-gray-100 dark:text-gray-900' }}"
              >
                {{ 'Edit Kegiatan' if current_lang == 'id' else 'Edit Activity' }}
              </h2>

              <form method="POST" class="space-y-4">
                <input
                  type="hidden"
                  name="csrf_token"
                  value="{{ csrf_token() }}"
                />

                <!-- Nama Kegiatan -->
                <div>
                  <label
                    class="block mb-1 font-medium {{ 'text-gray-700 dark:text-gray-200' if current_theme == 'dark' else 'text-gray-100 dark:text-gray-800' }}"
                  >
                    {{ 'Nama Kegiatan' if current_lang == 'id' else 'Activity Name' }}
                  </label>
                  <input
                    type="text"
                    name="nama_kegiatan"
                    value="{{ event.nama_kegiatan }}"
                    required
                    class="w-full border rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 transition {{ 'dark:bg-gray-700 dark:text-white border-white dark:border-white' if current_theme == 'dark' else 'dark:bg-gray-200 dark:text-black border-gray-300 dark:border-gray-600' }}"
                  />
                </div>

                <!-- Jenis Kegiatan -->
                <div>
                  <label
                    class="block mb-1 font-medium {{ 'text-gray-700 dark:text-gray-200' if current_theme == 'dark' else 'text-gray-100 dark:text-gray-800' }}"
                  >
                    {{ 'Jenis Kegiatan' if current_lang == 'id' else 'Activity Type' }}
                  </label>
                  <select
                    name="jenis_kegiatan"
                    required
                    class="w-full border rounded p-2"
                  >
                    <option value="siaga" {{ 'selected' if event.jenis_kegiatan == 'siaga' else '' }}>Siaga</option>
                    <option value="penggalang" {{ 'selected' if event.jenis_kegiatan == 'penggalang' else '' }}>Penggalang</option>
                    <option value="penegak" {{ 'selected' if event.jenis_kegiatan == 'penegak' else '' }}>Penegak</option>
                    <option value="pandega" {{ 'selected' if event.jenis_kegiatan == 'pandega' else '' }}>Pandega</option>
                    <option value="penegak dan pandega" {{ 'selected' if event.jenis_kegiatan == 'penegak dan pandega' else '' }}>Penegak dan Pandega</option>
                  </select>
                </div>

                <!-- Waktu Pelaksanaan -->
                <div>
                  <label
                    class="block mb-1 font-medium {{ 'text-gray-700 dark:text-gray-200' if current_theme == 'dark' else 'text-gray-100 dark:text-gray-800' }}"
                  >
                    {{ 'Waktu Pelaksanaan' if current_lang == 'id' else 'Schedule' }}
                  </label>
                  <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-xs opacity-70">Mulai</label>
                        <input
                            type="date"
                            name="waktu_pelaksanaan_dimulai"
                            value="{{ event.waktu_pelaksanaan_dimulai }}"
                            required
                            class="w-full border rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 transition {{ 'dark:bg-gray-700 dark:text-white border-white dark:border-white' if current_theme == 'dark' else 'dark:bg-gray-200 dark:text-black border-gray-300 dark:border-gray-600' }}"
                        />
                    </div>
                    <div>
                        <label class="text-xs opacity-70">Selesai</label>
                        <input
                            type="date"
                            name="waktu_pelaksanaan_selesai"
                            value="{{ event.waktu_pelaksanaan_selesai }}"
                            required
                            class="w-full border rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 transition {{ 'dark:bg-gray-700 dark:text-white border-white dark:border-white' if current_theme == 'dark' else 'dark:bg-gray-200 dark:text-black border-gray-300 dark:border-gray-600' }}"
                        />
                    </div>
                  </div>
                </div>

                <!-- Tempat Pelaksanaan -->
                <div>
                  <label
                    class="block mb-1 font-medium {{ 'text-gray-700 dark:text-gray-200' if current_theme == 'dark' else 'text-gray-100 dark:text-gray-800' }}"
                  >
                    {{ 'Tempat Pelaksanaan' if current_lang == 'id' else 'Location' }}
                  </label>
                  <input
                    type="text"
                    name="tempat_pelaksanaan"
                    value="{{ event.tempat_pelaksanaan }}"
                    required
                    class="w-full border rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 transition {{ 'dark:bg-gray-700 dark:text-white border-white dark:border-white' if current_theme == 'dark' else 'dark:bg-gray-200 dark:text-black border-gray-300 dark:border-gray-600' }}"
                  />
                </div>

                <!-- Tanggal Tes -->
                <div>
                  <label
                    class="block mb-1 font-medium {{ 'text-gray-700 dark:text-gray-200' if current_theme == 'dark' else 'text-gray-100 dark:text-gray-800' }}"
                  >
                    {{ 'Jadwal Tes' if current_lang == 'id' else 'Test Schedule' }}
                  </label>
                  <input
                    type="text"
                    name="tanggal_tes"
                    value="{{ event.tanggal_tes if event.tanggal_tes else '' }}"
                    class="w-full border rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 transition {{ 'dark:bg-gray-700 dark:text-white border-white dark:border-white' if current_theme == 'dark' else 'dark:bg-gray-200 dark:text-black border-gray-300 dark:border-gray-600' }}"
                    placeholder="{{ 'Contoh: Setiap hari jam 07:00 - 15:00' if current_lang == 'id' else 'Example: Every day 07:00 - 15:00' }}"
                  />
                </div>

                <!-- Tempat Tes -->
                <div>
                  <label
                    class="block mb-1 font-medium {{ 'text-gray-700 dark:text-gray-200' if current_theme == 'dark' else 'text-gray-100 dark:text-gray-800' }}"
                  >
                    {{ 'Tempat Tes' if current_lang == 'id' else 'Test Location' }}
                  </label>
                  <input
                    type="text"
                    name="tempat_tes"
                    value="{{ event.tempat_tes if event.tempat_tes else '' }}"
                    class="w-full border rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 transition {{ 'dark:bg-gray-700 dark:text-white border-white dark:border-white' if current_theme == 'dark' else 'dark:bg-gray-200 dark:text-black border-gray-300 dark:border-gray-600' }}"
                    placeholder="{{ 'Masukkan tempat tes' if current_lang == 'id' else 'Enter test location' }}"
                  />
                </div>

                <!-- Assign Evaluator -->
                <div>
                  <label
                    class="block mb-2 font-medium {{ 'text-gray-700 dark:text-gray-200' if current_theme == 'dark' else 'text-gray-100 dark:text-gray-800' }}"
                  >
                    {{ 'Pilih Penilai' if current_lang == 'id' else 'Assign Evaluators' }}
                  </label>
                  <div class="space-y-2 max-h-40 overflow-y-auto p-3 border rounded-lg {{ 'dark:bg-gray-700 dark:border-gray-600' if current_theme == 'dark' else 'bg-white border-gray-300' }}">
                    {% for evaluator in evaluators %}
                    <label class="flex items-center space-x-3 cursor-pointer">
                      <input type="checkbox" name="evaluators" value="{{ evaluator.id }}" 
                             {{ 'checked' if evaluator in event.evaluators else '' }}
                             class="form-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500">
                      <span class="{{ 'text-gray-200' if current_theme == 'dark' else 'text-gray-800' }}">
                        {{ evaluator.nama_lengkap }}
                      </span>
                    </label>
                    {% else %}
                    <p class="text-sm text-gray-500 italic">{{ 'Belum ada penilai terdaftar.' if current_lang == 'id' else 'No evaluators registered.' }}</p>
                    {% endfor %}
                  </div>
                </div>

                <div class="flex gap-4 mt-6">
                    <a href="{{ url_for('admin_manajemen_seleksi') }}" class="w-full text-center bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 rounded-lg transition-all duration-300 shadow-md">
                        {{ 'Batal' if current_lang == 'id' else 'Cancel' }}
                    </a>
                    <button
                      type="submit"
                      class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-all duration-300 shadow-md hover:shadow-lg"
                    >
                      {{ 'Update' if current_lang == 'id' else 'Update' }}
                    </button>
                </div>
              </form>
            </div>
          </section>
        </main>
      </div>
    </div>

    <!-- Animation Script -->
    {% include 'script_animation.html' %}
  </body>
</html>
