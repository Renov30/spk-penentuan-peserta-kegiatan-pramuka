<!DOCTYPE html>
<html
  class="transition duration-300 ease-in-out"
  lang="{{ current_lang }}"
  x-data
>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="csrf-token" content="{{ csrf_token() }}" />
    <title>
      {{ 'Dashboard Peserta | SPK Pramuka' if current_lang == 'id' else 'Participant Dashboard | Scout DSS' }}
    </title>

    <!-- Tailwind CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/output.css') }}"
    />

    <!-- Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
    />

    <!-- Alpine.js -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>

    <!-- Script Sidebar -->
    {% include "script_sidebar.html" %}

    <!-- Script Theme -->
    {% include 'script_theme.html' %}
  </head>
  <body
    x-data="{ ready: false }"
    x-init="ready = true"
    :class="{ 'dark': $store.theme?.isDark }"
    x-bind:class="{
        'bg-background-dark text-white': $store.theme?.isDark,
        'bg-gray-100 text-black': !$store.theme?.isDark
      }"
    class="transition duration-300 ease-in-out font-sans scroll-smooth {{ 'bg-background-dark text-white' if current_theme == 'dark' else 'bg-gray-100 text-black' }}"
  >
    <div
      class="flex h-screen {{ 'bg-gray-800' if current_theme == 'dark' else 'bg-gray-300' }}"
    >
      <!-- Sidebar -->
      {% include 'sidebar.html' %}

      <!-- Main content -->
      <div class="flex flex-col flex-1 overflow-hidden h-full">
        <!-- Top Navbar -->
        {% include 'header.html' %}

        <!-- Page Content -->
        <main
          class="flex-1 overflow-y-auto pt-28 h-full transition-all duration-300"
          :class="Alpine.store('sidebar').open ? 'ml-[15%]' : 'ml-[5%]'"
        >
          <section
            class="flex items-center justify-center wow animate__animated animate__fadeInUp animate__delay-0.5s {{ 'bg-gray-800' if current_theme == 'dark' else 'bg-gray-300' }}"
          >
            <!-- Notification Box -->
            {% include 'notification_box.html' %}

            <!-- Content -->
            <div class="container mx-auto p-6">
              <h1
                class="text-3xl font-bold mb-6 {{ 'text-white' if current_theme == 'dark' else 'text-black' }}"
              >
                {{ 'Dashboard Peserta' if current_lang == 'id' else 'Participant Dashboard' }}
              </h1>

              <!-- Welcome Message -->
              <div class="mb-6">
                <h3
                  class="text-xl font-bold mb-2 {{ 'text-white' if current_theme == 'dark' else 'text-black' }}"
                >
                  {{ 'Selamat datang,' if current_lang == 'id' else 'Welcome,' }} {{ user.nama_lengkap }}
                </h3>
                <p
                  class="{{ 'text-gray-200' if current_theme == 'dark' else 'text-gray-600' }}"
                >
                  {{ 'Dashboard ini menampilkan informasi biodata dan status seleksi Anda.' if current_lang == 'id' else 'This dashboard displays your biodata information and selection status.' }}
                </p>
              </div>

              <!-- Status Cards -->
              <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-6">
                <!-- Status Seleksi -->
                <div
                  class="rounded-xl shadow p-6 {{ 'bg-gray-900 text-white' if current_theme == 'dark' else 'bg-gray-100 text-black' }}"
                >
                  <div class="flex items-center justify-between mb-4">
                    <h2 class="text-lg font-semibold">
                      {{ 'Status Seleksi' if current_lang == 'id' else 'Selection Status' }}
                    </h2>
                    <i class="fa-solid fa-clipboard-check text-2xl text-blue-500"></i>
                  </div>
                  <p class="text-2xl font-bold text-blue-600">
                    {{ status_seleksi }}
                  </p>
                </div>

                <!-- Nilai Akhir -->
                {% if nilai_akhir is not none %}
                <div
                  class="rounded-xl shadow p-6 {{ 'bg-gray-900 text-white' if current_theme == 'dark' else 'bg-gray-100 text-black' }}"
                >
                  <div class="flex items-center justify-between mb-4">
                    <h2 class="text-lg font-semibold">
                      {{ 'Nilai Akhir' if current_lang == 'id' else 'Final Score' }}
                    </h2>
                    <i class="fa-solid fa-star text-2xl text-yellow-500"></i>
                  </div>
                  <p class="text-2xl font-bold text-yellow-600">
                    {{ "%.2f"|format(nilai_akhir) }}
                  </p>
                </div>

                <!-- Ranking -->
                {% if ranking is not none %}
                <div
                  class="rounded-xl shadow p-6 {{ 'bg-gray-900 text-white' if current_theme == 'dark' else 'bg-gray-100 text-black' }}"
                >
                  <div class="flex items-center justify-between mb-4">
                    <h2 class="text-lg font-semibold">
                      {{ 'Ranking' if current_lang == 'id' else 'Ranking' }}
                    </h2>
                    <i class="fa-solid fa-trophy text-2xl text-green-500"></i>
                  </div>
                  <p class="text-2xl font-bold text-green-600">
                    #{{ ranking }}
                  </p>
                </div>
                {% endif %}
                {% endif %}
              </div>

              <!-- Biodata Section -->
              {% if biodata %}
              <div class="mt-8" id="biodata">
                <h2
                  class="text-2xl font-bold mb-4 {{ 'text-white' if current_theme == 'dark' else 'text-black' }}"
                >
                  <i class="fa-solid fa-user-circle mr-2"></i>
                  {{ 'Biodata Peserta' if current_lang == 'id' else 'Participant Biodata' }}
                </h2>
                <div
                  class="rounded-xl shadow p-6 {{ 'bg-gray-900 text-white' if current_theme == 'dark' else 'bg-white text-black' }}"
                >
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                      <label class="text-sm font-medium {{ 'text-gray-400' if current_theme == 'dark' else 'text-gray-600' }}">
                        {{ 'Nama Lengkap' if current_lang == 'id' else 'Full Name' }}
                      </label>
                      <p class="font-semibold {{ 'text-white' if current_theme == 'dark' else 'text-black' }}">
                        {{ biodata.nama_lengkap or '-' }}
                      </p>
                    </div>
                    <div>
                      <label class="text-sm font-medium {{ 'text-gray-400' if current_theme == 'dark' else 'text-gray-600' }}">
                        {{ 'Tanggal Lahir' if current_lang == 'id' else 'Date of Birth' }}
                      </label>
                      <p class="font-semibold {{ 'text-white' if current_theme == 'dark' else 'text-black' }}">
                        {{ biodata.tanggal_lahir.strftime('%d/%m/%Y') if biodata.tanggal_lahir else '-' }}
                      </p>
                    </div>
                    <div>
                      <label class="text-sm font-medium {{ 'text-gray-400' if current_theme == 'dark' else 'text-gray-600' }}">
                        {{ 'Jenis Kelamin' if current_lang == 'id' else 'Gender' }}
                      </label>
                      <p class="font-semibold {{ 'text-white' if current_theme == 'dark' else 'text-black' }}">
                        {{ biodata.jenis_kelamin or '-' }}
                      </p>
                    </div>
                    <div>
                      <label class="text-sm font-medium {{ 'text-gray-400' if current_theme == 'dark' else 'text-gray-600' }}">
                        {{ 'Usia' if current_lang == 'id' else 'Age' }}
                      </label>
                      <p class="font-semibold {{ 'text-white' if current_theme == 'dark' else 'text-black' }}">
                        {{ biodata.usia or '-' }} {{ 'tahun' if current_lang == 'id' else 'years' }}
                      </p>
                    </div>
                    <div>
                      <label class="text-sm font-medium {{ 'text-gray-400' if current_theme == 'dark' else 'text-gray-600' }}">
                        {{ 'Golongan' if current_lang == 'id' else 'Group' }}
                      </label>
                      <p class="font-semibold {{ 'text-white' if current_theme == 'dark' else 'text-black' }}">
                        {{ biodata.golongan or '-' }}
                      </p>
                    </div>
                    <div>
                      <label class="text-sm font-medium {{ 'text-gray-400' if current_theme == 'dark' else 'text-gray-600' }}">
                        {{ 'Tingkatan' if current_lang == 'id' else 'Level' }}
                      </label>
                      <p class="font-semibold {{ 'text-white' if current_theme == 'dark' else 'text-black' }}">
                        {{ biodata.tingkatan or '-' }}
                      </p>
                    </div>
                    <div>
                      <label class="text-sm font-medium {{ 'text-gray-400' if current_theme == 'dark' else 'text-gray-600' }}">
                        {{ 'Email' if current_lang == 'id' else 'Email' }}
                      </label>
                      <p class="font-semibold {{ 'text-white' if current_theme == 'dark' else 'text-black' }}">
                        {{ biodata.email or '-' }}
                      </p>
                    </div>
                    <div>
                      <label class="text-sm font-medium {{ 'text-gray-400' if current_theme == 'dark' else 'text-gray-600' }}">
                        {{ 'Nomor HP' if current_lang == 'id' else 'Phone Number' }}
                      </label>
                      <p class="font-semibold {{ 'text-white' if current_theme == 'dark' else 'text-black' }}">
                        {{ biodata.nomor_hp or '-' }}
                      </p>
                    </div>
                    <div class="md:col-span-2">
                      <label class="text-sm font-medium {{ 'text-gray-400' if current_theme == 'dark' else 'text-gray-600' }}">
                        {{ 'Alamat Tinggal' if current_lang == 'id' else 'Address' }}
                      </label>
                      <p class="font-semibold {{ 'text-white' if current_theme == 'dark' else 'text-black' }}">
                        {{ biodata.alamat_tinggal or '-' }}
                      </p>
                    </div>
                    <div>
                      <label class="text-sm font-medium {{ 'text-gray-400' if current_theme == 'dark' else 'text-gray-600' }}">
                        {{ 'Asal Gudep' if current_lang == 'id' else 'Gudep Origin' }}
                      </label>
                      <p class="font-semibold {{ 'text-white' if current_theme == 'dark' else 'text-black' }}">
                        {{ biodata.asal_gudep or '-' }}
                      </p>
                    </div>
                    <div>
                      <label class="text-sm font-medium {{ 'text-gray-400' if current_theme == 'dark' else 'text-gray-600' }}">
                        {{ 'Asal Kwarran' if current_lang == 'id' else 'Kwarran Origin' }}
                      </label>
                      <p class="font-semibold {{ 'text-white' if current_theme == 'dark' else 'text-black' }}">
                        {{ biodata.asal_kwarran or '-' }}
                      </p>
                    </div>
                    <div>
                      <label class="text-sm font-medium {{ 'text-gray-400' if current_theme == 'dark' else 'text-gray-600' }}">
                        {{ 'Asal Kwarcab' if current_lang == 'id' else 'Kwarcab Origin' }}
                      </label>
                      <p class="font-semibold {{ 'text-white' if current_theme == 'dark' else 'text-black' }}">
                        {{ biodata.asal_kwarcab or '-' }}
                      </p>
                    </div>
                    <div>
                      <label class="text-sm font-medium {{ 'text-gray-400' if current_theme == 'dark' else 'text-gray-600' }}">
                        {{ 'Asal Kwarda' if current_lang == 'id' else 'Kwarda Origin' }}
                      </label>
                      <p class="font-semibold {{ 'text-white' if current_theme == 'dark' else 'text-black' }}">
                        {{ biodata.asal_kwarda or '-' }}
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              {% else %}
              <!-- No Biodata Message -->
              <div class="mt-8">
                <div
                  class="rounded-xl shadow p-6 text-center {{ 'bg-gray-900 text-white' if current_theme == 'dark' else 'bg-white text-black' }}"
                >
                  <i class="fa-solid fa-info-circle text-4xl text-blue-500 mb-4"></i>
                  <p class="text-lg {{ 'text-gray-300' if current_theme == 'dark' else 'text-gray-600' }}">
                    {{ 'Biodata Anda belum terdaftar. Silakan hubungi administrator untuk mendaftarkan biodata.' if current_lang == 'id' else 'Your biodata is not registered yet. Please contact the administrator to register your biodata.' }}
                  </p>
                </div>
              </div>
              {% endif %}
            </div>
          </section>
        </main>
      </div>
    </div>

    <!-- Animation & Notification Script -->
    {% include 'script_animation.html' %} {% include 'script_notification.html' %}
  </body>
</html>

